---
/**
    * hero.astro ‚Äî Zwei Hero-Sections mit einheitlichem  + limitierter Galerie-H√∂he
    * DRY ohne Funktions-Components (Astro: map direkt im Template statt return in functions)
    */

const IMAGES = {
    bau: [
        "/img/bagger-arbeiten-1.jpg",
        "/img/pflaster-arbeiten-1.jpg",
        "/img/pflaster-arbeiten-2.jpg",
        "/img/bagger-arbeiten-2.jpg",
        "/img/pflaster-arbeiten-3.jpg",
        "/img/pflaster-arbeiten-4.jpg",
        "/img/pflaster-arbeiten-5.jpg",
        "/img/pflaster-arbeiten-6.jpg",
    ],
    gruen: [
        "/img/rasenmaeher-1.jpg",
        "/img/boeschungsmaeher-1.jpg",
    ],
};

const BAU_LEISTUNGEN = [
    "Pflasterarbeiten f√ºr Einfahrten, Terrassen, Wege und Pl√§tze",
    "Baggerarbeiten f√ºr Ausschachtungen, Fundamentvorbereitungen und Erdbewegungen",
    "Suchschachtungen f√ºr Leitungen, Kabel und Anschl√ºsse",
    "Abrissarbeiten von kleineren Bauwerken und Anlagen",
];

const GRUEN_LEISTUNGEN = [
    "Unkrautbeseitigung auf Wegen, Pl√§tzen und Gr√ºnfl√§chen",
    "Pflege von Solarparks f√ºr maximale Effizienz und ein gepflegtes Erscheinungsbild",
    "Grasm√§hen & Fl√§chenpflege ‚Äì auch auf weitl√§ufigen Grundst√ºcken",
];

// DRY: Daten-Array f√ºr Sections
const sections = [
    {
        id: "leistungen",
        title: "Tiefbauarbeiten",
        text:
            "Als erfahrenes Kleinunternehmen aus Leipzig bieten wir Ihnen ein breites Leistungsspektrum im Bereich Tiefbauarbeiten. Mit moderner Technik, handwerklichem K√∂nnen und viel Einsatzbereitschaft realisieren wir kleine wie gro√üe Projekte zuverl√§ssig und pr√§zise.",
        leistungen: BAU_LEISTUNGEN,
        bilder: IMAGES.bau,
        galerieId: "gal-bau",
        footer:
            "Ob Privatkunde oder Gewerbe ‚Äì wir unterst√ºtzen Sie bei der Umsetzung Ihrer Vorhaben und sorgen f√ºr saubere, langlebige Ergebnisse.",
    },
    {
        id: "gruenpflege",
        title: "Unkrautbeseitigung & Solarparkpflege",
        text:
            "Neben Tiefbauarbeiten sind wir auch Ihr Partner f√ºr die professionelle Pflege von Fl√§chen und Au√üenanlagen. Wir sorgen f√ºr Ordnung, Sauberkeit und Nachhaltigkeit ‚Äì im privaten Garten ebenso wie auf gro√üfl√§chigen Anlagen.",
        leistungen: GRUEN_LEISTUNGEN,
        bilder: IMAGES.gruen,
        galerieId: "gal-gruen",
        footer:
            "Mit Zuverl√§ssigkeit, Erfahrung und flexibler Terminplanung setzen wir Ihre W√ºnsche schnell und sorgf√§ltig um.",
    },
];
---
<section class="top-level-section" aria-label="MS-Konzept ‚Äì Bau & Gr√ºnpflege" data-reveal-stagger="100">
    <div class="text-center" data-reveal="fade">
        <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight">MS-Konzept - Bau & Gr√ºnpflege aus einer Hand</h1>
        <p class="mt-3 text-gray-600">Bagger- & Bauarbeiten ¬∑ Gr√ºnpflege & Landschaftsbau</p>
    </div>
</section>

{sections.map((s) => (
<section class="top-level-section" id={s.id} aria-label={s.title} data-reveal-stagger="80">
    <header data-reveal="fade">
        <h2 class="text-3xl md:text-4xl font-bold">{s.title}</h2>
        <p class="mt-2 text-gray-600">{s.text}</p>
    </header>

    <div class="mt-6 grid gap-6 md:grid-cols-3" data-reveal-stagger="70">
        {s.leistungen.map((l) => (
                <div class="rounded-2xl border bg-white p-5" data-reveal="fade">
                    <p class="mt-2 text-sm text-gray-600">{l}</p>
                </div>
        ))}
    </div>

    {/* Galerie */}
    <div class="relative mt-8" data-reveal="fade">
        <div class="gallery rounded-3xl border bg-white p-3 shadow-sm overflow-hidden">
            <div id={s.galerieId} class="flex gap-3 overflow-x-auto overflow-y-hidden snap-x snap-mandatory scroll-px-4 h-[320px]"
                 tabindex="0" aria-label={`Bildergalerie ${s.title}`}>
                {s.bilder.map((src, i) => (
                        <img src={src} alt={`${s.title} Bild ${i + 1}`}
                             class="snap-start h-full w-auto rounded-2xl border object-cover select-none"
                             draggable="false" loading={i === 0 ? "eager" : "lazy"}/>
                ))}
            </div>
            {/* Buttons */}
            <div class="hidden md:block">
                <button type="button"
                        class="absolute left-2 top-1/2 -translate-y-1/2 rounded-full border bg-white/80 backdrop-blur p-2 shadow hover:bg-white"
                        data-scroll-target={s.galerieId} data-direction="-1" aria-label="Vorheriges Bild">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                         stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>
                <button type="button"
                        class="absolute right-2 top-1/2 -translate-y-1/2 rounded-full border bg-white/80 backdrop-blur p-2 shadow hover:bg-white"
                        data-scroll-target={s.galerieId} data-direction="1" aria-label="N√§chstes Bild">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                         stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <p class="mt-6 text-gray-700" data-reveal="fade">
        {s.footer}
        <strong class="block">üëâ Einsatzgebiet: Leipzig und Umgebung bis zu 200&nbsp;km.</strong>
    </p>

    <div class="mt-4">
        <a href="#kontakt" class="rounded-2xl px-5 py-3 text-white bg-black hover:bg-gray-800" data-reveal="fade">Kostenloses
            Angebot</a>
    </div>
</section>
    ))}

<script is:inline>
    const SCROLL_AMOUNT = 360;
    document.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-scroll-target]');
        if (!btn) return;
        const targetId = btn.getAttribute('data-scroll-target');
        const dir = parseInt(btn.getAttribute('data-direction'));
        const el = document.getElementById(targetId);
        if (el) el.scrollBy({left: SCROLL_AMOUNT * dir, behavior: 'smooth'});
    });
</script>
